<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.tzt.AccountsDaotzt">
	<select id="queryCapital" parameterType="com.entity.tzt.Capital"  resultType="map">
		select 
			a.capitalid,
			a.accountsid,
			a.ordid,
			a.projectsid,
			r.value,
			a.balance,
			a.time	
	 	from capital a,capitaltype r 
	 	<where>
	 		 a.capitalflow=r.value 	
	 		<if test ="capitalid !=null">
	 			and a.capitalid= #{capitalid}
	 		</if>
	 		<if test ="roleid !=null">
	 			and a.accountsid= #{accountsid}
	 		</if>
	 		<if test ="roleid !=null">
	 			and a.ordid= #{ordid}
	 		</if>
	 		<if test ="roleid !=null">
	 			and a.projectsid= #{projectsid}
	 		</if>
	 		<if test ="roleid !=null">
	 			and a.capitalflow= #{capitalflow}
	 		</if>
	 		<if test ="starttime !=null ">
	 			and a.time &gt;= to_date(#{starttime},'yyyy-MM-dd HH24:MI:SS')
	 		</if>
	 		<if test ="endtime !=null">
	 			and a.time &lt; = to_date(#{endtime},'yyyy-MM-dd HH24:MI:SS')
	 		</if>
	 		
	 	</where>
	</select>
	
	<insert id="addCapital" parameterType="com.entity.tzt.Capital" >
		insert into capital values(list_capital.nextval,#{accountsid,jdbcType=NUMERIC},#{ordid,jdbcType=NUMERIC},
		#{projectsid,jdbcType=NUMERIC},#{capitalflow,jdbcType=NUMERIC},#{balance,jdbcType=REAL},
		#{capital,jdbcType=REAL},to_date(#{starttime,jdbcType=VARCHAR},'yyyy-MM-dd HH24:MI:SS')) 
	</insert>
</mapper>